# 일정 관리 프로그램 매뉴얼
## 1. 프로그램 시작 시
  - event.txt, habit.txt, last_id.txt가 있는지 확인 (없다면 생성 및 필요 값들 초기화)
  - Event 배열, Habit 배열, last_id를 가져옴
  - 이후 event_count, habit_count 등 필요한 모든 전역변수들에 대해 초기화 혹은 로딩을 거침

## 2. 기본 정보 로딩 후, 메인 동작
- 사용자에게 '월 달력' 형식으로 화면을 보여줌
- 이후 메뉴창을 보여주고 입력을 대기 (0 들어오면 while 종료)
- 메뉴창은 아래와 같음 (1~4 switch)
  - ## 1 ) 달력 형식 변경
    - 월, 주, 일 중에 선택 -> 마찬가지로 입력 받아서 선택
    - 화면 제공 후, 다시 메뉴창을 보여주고 선택을 대기
  - ## 2 ) 일정 관리
      ### 2-1 ) 일정 추가
      - 각 필드에 대해 입력을 받음
      - 아래는 필드
        ```c
        Event {
            int id;                   // 고유 식별자
            char title[50];           // 일정 제목
            struct tm date_start;     // 일정 시작 시간
            struct tm date_end;       // 일정 종료 시간
            int priority;             // 중요도 (1 ~ 5)
            double quantity;          // 분량
            char details[100];        // 상세 내용
            int status;               // 진행 상태 (0: Not Started, 1: In Progress, 2: Completed)
        }
        ```
      - 각 필드에 대해 유효성 검사하는 과정 필요:
        - 날짜 형식: `strptime`으로 입력 확인.
        - 시작일이 종료일보다 빠른지 확인.
        - 중요도가 1~5 범위 내에 있는지 확인.
      - 올바르게 입력된 경우 Event 배열에 추가 & last_id 변경

      ---

      ### 2-2 ) 일정 삭제 (리스트 보여주는 과정은 함수에 포함 안함)
      - 현재 월, 주, 일 형식에 따라서 일정을 보여줌 (시작의 calendar와 동일)
      - 사용자가 선택한 일정 -> 해당하는 id로 매핑해서 인식
      - 해당하는 id를 Event 배열에서 삭제

      ---

      ### 2-3 ) 일정 수정 (리스트 보여주는 과정은 함수에 포함 안함)
      - 현재 월, 주, 일 형식에 따라서 일정을 보여줌 (시작의 calendar와 동일)
      - 사용자가 선택한 일정 -> 해당하는 id로 매핑해서 인식
      - 이후 deleteEvent 후, addEvent를 작동해서 수정된 것처럼 작동하도록 함
  - ## 3 ) 목표 관리
      ### 3-1 ) 목표 추가
      - 각 필드에 대해 입력을 받음
      - 아래는 필드
        ```c
        Habit {
            char name[30];            // 목표 이름
            struct tm start_date;     // 목표 시작 날짜
            struct tm end_date;       // 목표 종료 날짜
            int days;                 // 지속 성공 일수
            int is_done;              // 오늘 목표 달성 여부
            int frequency;            // 수행 빈도 (1: 매일, 2: 주 3회 등)
        }
        ```
      - 각 필드에 대해 유효성 검사하는 과정 필요:
        - 이름 중복 여부 확인.
        - 날짜 형식 검증 및 기간 확인.
        - 빈도가 1 또는 2인지 확인.
      - 올바르게 입력된 경우 Habit 배열에 추가.

      ---

      ### 3-2 ) 목표 삭제 (리스트 보여주는 과정은 함수에 포함 안함)
      - 목표 리스트를 사용자에게 전부 보여줌
      - 선택한 name에 해당하는 habit을 Habit 배열에서 삭제
       
      ---

      ### 3-3 ) 목표 수정
      - 목표 리스트를 사용자에게 전부 보여줌
      - 이후 deleteHabit, addHabit을 작동해서 수정된 것처럼 작동하도록 함
  - ## 4) 일정 스케줄링 (가중치)

      ### 스케줄링 가중치 계산
      - 일정의 우선순위를 계산하는 공식은 다음과 같습니다:
          ```c
          // 남은 작업량을 고려하여 가중치 계산:
          weight = (1 / Dday) * 100 + priority + (quantity / interval);

          // 마감일까지의 여유 시간이 적을수록 높은 페널티 추가:
          weight = (1 / Dday) * 100 + priority + penalty;  // penalty = (10 / Dday)
          ```
          - `Dday`: 현재 날짜와 마감일의 차이(일 단위).
          - `priority`: 사용자가 설정한 중요도 (1~5).
          - `quantity`: 전체 작업량(분량).
          - `interval`: 작업 시작일과 마감일의 차이(일 단위).

      ### 필수 필드
      - 가중치를 계산하기 위해 필요한 필드:
        - `date_start`, `date_end`, `priority`, `quantity`.
      - 추가적으로 페널티를 반영하거나, 작업 간 여유를 비교하기 위해 `interval` 필드가 필요합니다.

      ---

      ### 4-1) 사용자가 스케줄링할 일정을 선택하는 경우

      - **기능 설명**:
        1. 일정 목록을 출력하여 사용자에게 보여줌.
        2. 사용자가 스케줄링할 일정의 ID를 입력 (여러 개 선택 가능).
        3. 입력된 ID에 해당하는 일정을 `schedule` 배열에 저장.
        4. `schedule` 배열에 담긴 일정을 가중치에 따라 정렬.
        5. 정렬된 결과를 화면에 표시.

      - **추가 고려 사항**:
        - 잘못된 ID 입력 시, 해당 입력을 무시하고 사용자에게 경고 메시지 표시.
        - 다중 일정 선택을 지원하기 위해 쉼표(`,`)로 구분된 ID 입력 방식 제공.

      ---

      ### 4-2) 특정 기간 내의 일정 스케줄링을 제공하는 경우

      - **기능 설명**:
        1. 사용자가 스케줄링할 기간의 시작일(`start_date`)과 종료일(`end_date`)을 입력.
        2. 입력된 기간 내의 일정을 필터링하여 `schedule` 배열에 저장.
        3. `schedule` 배열에 담긴 일정을 가중치에 따라 정렬.
        4. 정렬된 결과를 화면에 표시.

      - **추가 고려 사항**:
        - 입력된 기간이 유효하지 않은 경우(예: 시작일이 종료일보다 늦은 경우), 사용자에게 경고 메시지를 표시하고 다시 입력받음.
        - 필터링된 결과가 없을 경우, "선택한 기간 내 일정이 없습니다."라는 메시지를 출력.

      ---

      ### 논점 A: 선택 범위가 월, 주, 일 범위를 벗어나는 경우

      - **해결 방안**:
        1. **기본 범위 제공**:
          - 사용자가 범위를 명시하지 않은 경우 기본적으로 1개월 단위를 제공.
        2. **범위 확장 옵션 제공**:
          - 범위가 월, 주, 일 단위를 초과하는 경우, 사용자에게 "더 넓은 범위를 보시겠습니까?"라는 입력 옵션 제공.
        3. **결과 분류**:
          - 범위 내 일정과 초과 일정(예: "이후 일정")을 별도로 분류하여 출력.

        - 이 외의 값은 default로 재입력 요청

## 3. 프로그램 종료
  - 0이 들어오는 경우 while이 깨지며 종료로 넘어옴
  - Event 배열, Habit 배열, last_id 값을 각 txt 파일에 저장:
    - `w` 모드로 기존 파일을 삭제하고 새로 적기 때문에, 오류 없이 기록 가능.
  - 강제 종료와 같은 부분은 추가적인 예외 처리 필요.

## 추가 개선 사항
1. 파일 입출력 오류 처리:
   - 파일 열기 실패 및 읽기 오류에 대한 예외 처리 필요.
2. 날짜와 시간 입력 검사:
   - 유효한 날짜인지 확인하고, 잘못된 형식은 사용자에게 재입력을 요구.
3. 데이터 중복 검사:
   - `Event`의 `id`와 `Habit`의 `name` 중복 여부를 확인하는 함수 필요.
4. 사용자 입력 오류 처리:
   - 범위를 벗어난 값(예: 중요도, 빈도)을 입력하면 재입력을 요구.


## 수정된 내용 요약
- `Event`와 `Habit` 구조체 필드 개선.
- 각 구조체에 필요한 유효성 검사와 계산 함수 추가.
- 오류 처리 및 데이터 검증 로직 강화.
